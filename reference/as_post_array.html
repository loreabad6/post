<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a post_array object — as_post_array • post</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a post_array object — as_post_array"><meta name="description" content="post_array is a spatio-temporal array data structure that
organises polygons that change their shape in space and time.
It extends the stars class for vector data cubes to support
changing geometries as attributes.
The post_array class supports two dimensions: a summary geometry
dimension (default name: geom_sum) and a temporal dimension.
The summary geometry is a unique geometry per group
which summarises the changing shapes of the polygon geometries in the group."><meta property="og:description" content="post_array is a spatio-temporal array data structure that
organises polygons that change their shape in space and time.
It extends the stars class for vector data cubes to support
changing geometries as attributes.
The post_array class supports two dimensions: a summary geometry
dimension (default name: geom_sum) and a temporal dimension.
The summary geometry is a unique geometry per group
which summarises the changing shapes of the polygon geometries in the group."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">post</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/post01_post.html">Vector data cube structures</a></li>
    <li><a class="dropdown-item" href="../articles/post02_geomsum.html">Summarising geometries</a></li>
    <li><a class="dropdown-item" href="../articles/post03_compatibility.html">Compatibility with other packages</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/loreabad6/post" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a post_array object</h1>
      <small class="dont-index">Source: <a href="https://github.com/loreabad6/post/blob/HEAD/R/post_array.R" class="external-link"><code>R/post_array.R</code></a></small>
      <div class="d-none name"><code>as_post_array.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>post_array</code> is a spatio-temporal array data structure that
organises polygons that change their shape in space and time.
It extends the <code>stars</code> class for vector data cubes to support
changing geometries as attributes.
The <code>post_array</code> class supports two dimensions: a summary geometry
dimension (default name: <code>geom_sum</code>) and a temporal dimension.
The summary geometry is a unique geometry per group
which summarises the changing shapes of the polygon geometries in the group.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">as_post_array</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  group_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_column_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sf_column_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geometry_summary <span class="op">=</span> <span class="va">summarise_geometry_centroid</span>,</span>
<span>  geometry_summary_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'sf'</span></span>
<span><span class="fu">as_post_array</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  group_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_column_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sf_column_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geometry_summary <span class="op">=</span> <span class="va">summarise_geometry_centroid</span>,</span>
<span>  geometry_summary_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  point_st <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'post_table'</span></span>
<span><span class="fu">as_post_array</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'post_array'</span></span>
<span><span class="fu">as_post_array</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>object to convert to <code>post_array</code> with <code>POLYGON</code>/<code>MULTIPOLYGON</code>
geometries and a date/time column.</p></dd>


<dt id="arg-group-id">group_id<a class="anchor" aria-label="anchor" href="#arg-group-id"></a></dt>
<dd><p>See Details.
Defaults to the first non-spatial, non-temporal column in <code>x</code>.</p></dd>


<dt id="arg-time-column-name">time_column_name<a class="anchor" aria-label="anchor" href="#arg-time-column-name"></a></dt>
<dd><p>(character) name of column with the temporal
dimension information. Defaults to the first temporal column in <code>x</code>.</p></dd>


<dt id="arg-sf-column-name">sf_column_name<a class="anchor" aria-label="anchor" href="#arg-sf-column-name"></a></dt>
<dd><p>(character) name of column with changing
geometries. Defaults to active <code>sf_column</code>.</p></dd>


<dt id="arg-geometry-summary">geometry_summary<a class="anchor" aria-label="anchor" href="#arg-geometry-summary"></a></dt>
<dd><p>(function) function to compute the summary
geometry. Alternatively an <code>sfc</code> object with summary geometries (i.e.,
the result of a <code>summarise_geometry_*()</code> function or a custom <code>sfc</code>).
See summarise_geometry for functions or pass your own
summarise_geometry function.</p></dd>


<dt id="arg-geometry-summary-name">geometry_summary_name<a class="anchor" aria-label="anchor" href="#arg-geometry-summary-name"></a></dt>
<dd><p>(character) name of the column with summary
geometries.Defaults to "geom_sum"</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional parameters passed on to <code>geometry_summary</code> function.</p></dd>


<dt id="arg-point-st">point_st<a class="anchor" aria-label="anchor" href="#arg-point-st"></a></dt>
<dd><p>point argument passed onto <code><a href="https://r-spatial.github.io/stars/reference/st_dimensions.html" class="external-link">stars::st_dimensions()</a></code>.
Defaults to <code>TRUE</code> for the spatial dimension and to <code>FALSE</code> for the
temporal dimension (assumes interval times)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an object of class <code>post_array</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>group_id should be the name of the column containing the grouping
identifier for the changing polygons or a vector with group identifiers.
Character, integer, double and factor vectors are supported.
The vector should be of length 1 or the same as <code>nrow(x)</code>.
A vector of length 1 repeats the value for all the rows.
Providing a vector assumes that the ordering of the groups
is correct and that there are no duplicated timestamps per group</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Abad, L., Sudmanns, M., and Hölbling, D. (2024)
Vector data cubes for features evolving in space and time,
<em>AGILE GIScience Ser.</em>, 5, 16,
<a href="https://doi.org/10.5194/agile-giss-5-16-2024" class="external-link">https://doi.org/10.5194/agile-giss-5-16-2024</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">as_post_array</span><span class="op">(</span><span class="va">polygons</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stars object with 2 dimensions and 1 attribute</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attribute(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          geometry  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  POLYGON      :25  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  epsg:4326    : 0  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  +proj=long...: 0  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimension(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          from to     offset  delta refsys point</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> geom_sum    1  5         NA     NA WGS 84  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> datetime    1  5 2020-10-01 1 days   Date FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                            values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> geom_sum POINT (0.647816 0.9018588),...,POINT (0.4690683 0.17772)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> datetime                                                     NULL</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">polygons</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>area <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_area</a></span><span class="op">(</span><span class="va">geometry</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">as_post_array</span><span class="op">(</span></span></span>
<span class="r-in"><span>     geometry_summary <span class="op">=</span> <span class="va">summarise_geometry_union</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stars object with 2 dimensions and 2 attributes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attribute(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          geometry       area           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  POLYGON      :25   Min.   :5.366e+07  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  epsg:4326    : 0   1st Qu.:3.928e+08  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  +proj=long...: 0   Median :4.060e+08  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Mean   :6.216e+08  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     3rd Qu.:6.933e+08  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Max.   :1.537e+09  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimension(s):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          from to     offset  delta refsys point</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> geom_sum    1  5         NA     NA WGS 84 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> datetime    1  5 2020-10-01 1 days   Date FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                 values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> geom_sum POLYGON ((0.4971355 0.871...,...,POLYGON ((0.2973931 0.255...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> datetime                                                          NULL</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://loreabad6.github.io" class="external-link">Lorena Abad</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

